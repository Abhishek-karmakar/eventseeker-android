<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.wcities.eventseeker"
    android:installLocation="internalOnly"
    android:versionCode="7"
    android:versionName="1.6.1.1" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="19" />
    
    <supports-screens android:largeScreens="true"
        android:xlargeScreens="true" />

    <application
        android:name="com.wcities.eventseeker.app.EventSeekr"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.EventSeekr" >
        <!-- launchMode="singleTask" is used to keep same task for notifications which are redirecting to items
        from navigation drawer; otherwise clicking app icon on home screen always opens up 
        discover screen after receiving such notification & pressing back until we move out of app as in 
        following example.
        e.g.: Launch app -> sync accounts -> get notification of NotificationType=FOLLOWING -> click on it.
        It redirects to 'following' screen -> press back to move out of app. Now from home screen click 
        app icon. It displays discover screen rather then last 'following' screen which was browsed. Same result
        can be observed now onwards for every launch. This happens due to onCreate() being called up on every 
        launch after this, even though one task is there in back stack for the app. -->
        <activity
            android:name="com.wcities.eventseeker.MainActivity"
            android:windowSoftInputMode="adjustPan|adjustResize"
            android:launchMode="singleTask" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <!-- for twitter call back -->
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="twitter_callback"
                    android:scheme="com.wcities.eventseeker" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.facebook.LoginActivity"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Translucent.NoTitleBar" />
        
        <activity android:name="com.wcities.eventseeker.CalendarActivity"
            android:label="@string/add_to_calender"
            android:icon="@drawable/calendar"
            android:exported="false">
		    <intent-filter>
		        <action android:name="android.intent.action.SEND"/>
		        <category android:name="android.intent.category.DEFAULT"/>
		        <data android:mimeType="image/*"/>
		    </intent-filter>
		</activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="@string/map_v2_android_key" />
        
        <meta-data
            android:name="com.bosch.myspin.serversdk.maps.API_KEY"
            android:value="@string/map_v3_browser_key" /> 

        <meta-data
            android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/fb_app_id" />
        
        <meta-data
		    android:name="com.google.android.gms.version"
		    android:value="@integer/google_play_services_version" />

        <activity
            android:name="com.wcities.eventseeker.LockScreenActivity"
            android:label="Locked"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.NoTitleBar" />
        
        <activity
            android:name="com.wcities.eventseeker.exception.ReportActivity"
            android:label="Crash Reporting"
            android:noHistory="true"
            android:theme="@android:style/Theme.NoDisplay" />

        <receiver
            android:name="com.wcities.eventseeker.widget.EventseekerWidgetProvider"
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
                <action android:name="eventseeker.appwidget.action.WIDGET_UPDATE" />
                <action android:name="eventseeker.appwidget.action.WIDGET_NEXT_EVENT" />
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>

            <meta-data
                android:name="android.appwidget.provider"
                android:resource="@xml/widget_info" />
        </receiver>

        <service android:name="com.wcities.eventseeker.widget.EventseekerWidgetService" />
        <service android:name="com.wcities.eventseeker.applink.service.AppLinkService" />

        <receiver android:name="com.wcities.eventseeker.applink.receiver.AppLinkReceiver" >
            <intent-filter>
                <action android:name="android.bluetooth.adapter.action.STATE_CHANGED" />
                <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
                <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="android.media.AUDIO_BECOMING_NOISY" />
            </intent-filter>
        </receiver>
        <receiver
            android:name="com.wcities.eventseeker.gcm.GcmBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />

                <category android:name="com.wcities.eventseeker" />
            </intent-filter>
        </receiver>
        <receiver android:name="com.wcities.eventseeker.receiver.MusicNotificationReceiver" >
            <intent-filter>
                <action android:name="com.android.music.playstatechanged" />
                <action android:name="com.android.music.metachanged" />
            </intent-filter>
        </receiver>

        <!-- Bosch registrations start -->
        <meta-data
            android:name="usesMySPINServerSDK"
            android:value="true" />
        
        <activity android:name="com.wcities.eventseeker.bosch.BoschMainActivity"
            android:label="@string/title_activity_bosch_main"
            android:screenOrientation="portrait"
            android:theme="@style/Theme.EventSeekr.Bosch"
            android:configChanges="keyboardHidden|orientation|screenSize" />
        <!-- Bosch registrations end -->
        
        <!-- Samsung Gear 2 registrations start -->
        <service android:name="com.wcities.eventseeker.gear.service.SG2AccessoryProviderService" />
        
        <receiver android:name="com.samsung.android.sdk.accessory.ServiceConnectionIndicationBroadcastReceiver" >
            <intent-filter>
                <action android:name="android.accessory.service.action.ACCESSORY_SERVICE_CONNECTION_IND" />
            </intent-filter>
        </receiver>

        <receiver android:name="com.samsung.android.sdk.accessory.RegisterUponInstallReceiver" >
            <intent-filter>
                <action android:name="android.accessory.device.action.REGISTER_AFTER_INSTALL" />
            </intent-filter>
        </receiver>

        <meta-data android:name="AccessoryServicesLocation"
            android:value="/res/xml/accessoryservices.xml" />
        <!-- Samsung Gear 2 registrations end -->
        
    </application>

    <permission
        android:name="com.wcities.eventseeker.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.wcities.eventseeker.permission.MAPS_RECEIVE" />
    
    <!-- Necessary for google analytics & ford -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    
    <!-- Required to pair Bluetooth devices for ford sync & to support samsung gear 2 smart watch app -->
    <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
    
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <!-- for google play music sync -->
    <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <!-- To add event to calendar -->
    <uses-permission android:name="android.permission.READ_CALENDAR" />
	<uses-permission android:name="android.permission.WRITE_CALENDAR" />
	<!-- To support samsung gear 2 smart watch app -->
	<uses-permission android:name="com.samsung.accessory.permission.ACCESSORY_FRAMEWORK" />
    <uses-permission android:name="com.samsung.wmanager.APP" />
    <uses-permission android:name="com.samsung.wmanager.ENABLE_NOTIFICATION" />

    <permission
        android:name="com.wcities.eventseeker.permission.C2D_MESSAGE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.wcities.eventseeker.permission.C2D_MESSAGE" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    
    <!-- To disable google app store filtering based on implied feature requirements from declared permissions -->
    <uses-feature android:name="android.hardware.location" android:required="false" />
	<uses-feature android:name="android.hardware.location.network" android:required="false" />
	<uses-feature android:name="android.hardware.location.gps" android:required="false" />

</manifest>